#{extends 'main.html' /}

<h2>Project ${project.name}</h2>
<a target="_new" href="${project.url}">${project.url}</a>

<h3>Created</h3>
<p>
    ${project.created_at}
</p>

<h3>Api-Key</h3>
<p>
    #{if project.apiKey}
    ${project.apiKey}
    <a class="btn" href="@{Projects.removeApiKey(project.id)}" onclick="if (!confirm('Are you sure you want to delete this record?\n* all Noticfication for this key will be deleted,\n* all Projects will be disconnected!')) return false;"><i class="icon-minus"></i></a>
    #{/if}
    #{else}
    <a class="btn" href="@{Projects.addApiKey(project.id)}"><i class="icon-plus"></i></a>
    #{/else}
</p>
<h3>Connected Accounts</h3>
<p>
    <ul>
        #{list items:project.getAccounts(), as:'account'}
        <li><a href="@{Accounts.show(account.id)}">${account}</a></li>
        #{/list}
    </ul>
</p>
<h3>Unresolved Notices</h3>
<p>
    <ul>
        #{list items:notices, as:'notice'}
        <li><a href="@{Notices.show(notice.id).add('project_id',project.id)}">${notice}</a></li>
        #{/list}
    </ul>
</p>
<br />
<a class="btn btn-primary" href="@{Notices.index}">Back</a>



